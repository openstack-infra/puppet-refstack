<VirtualHost <%= scope.lookupvar('::refstack::apache::http::hostname') %>:80>
<% if !!scope.lookupvar('::refstack::apache::http::server_admin') %>
  ServerAdmin <%= scope.lookupvar('::refstack::apache::http::server_admin') %>
<% end %>
  ServerName <%= scope.lookupvar('::refstack::apache::http::hostname') %>

  DocumentRoot <%= scope.lookupvar('::refstack::apache::http::install_www_root') %>

  WSGIDaemonProcess refstack user=<%= scope.lookupvar('::refstack::apache::http::user') %> group=<%= scope.lookupvar('::refstack::apache::http::group') %> threads=5
  WSGIScriptAlias /api /etc/refstack/app.wsgi
  WSGIPassAuthorization On
  LogLevel warn
  ErrorLog ${APACHE_LOG_DIR}/refstack-error.log
  CustomLog ${APACHE_LOG_DIR}/refstack-access.log combined

  <Directory "/etc/refstack">
    Require all granted
  </Directory>
</VirtualHost>
